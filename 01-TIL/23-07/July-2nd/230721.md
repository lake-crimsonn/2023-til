# 230721

## 프로젝트 8일차

### 테스트

- paint-by-example이라는 모델을 찾음. example 이미지와 init 이미지를 마스크를 이용해 합성할 수 있는 모델임.
- 배경이 알아서 만들어지는 문제가 있음. 얼굴 마스크를 이용하면 얼굴만 지켜줌, 배경이 새로 생긴다. test2
- example로 사용하는 정장 이미지 역시 새로 생성이 된다. test2
- init이미지의 배경이 투명하지 않으면 머리카락 사이의 공간이 흰색임. test2
- init이미지가 정확히 512가 아닌 이상 마스크 크기와 차이가 있어 경계선에 흰색선이 생김 test2
- 얼굴 마스크가 아닌 정장 이미지에 맞는 마스크를 이용하면 얼굴이 새로 생성이 된다. test4
- 얼굴과 흰 배경을 한번에 잡은 마스크가 가장 성능이 좋음... 얼굴의 모양에 따라 마스크를 생성하지 않아도 된다. 하지만 3~4번 돌려보니 그래픽으로 생성된 정장이 자주 나옴. test5,6
- 슈트사진의 비율이 정사각형이 아니다보니 얼굴과 슈트 이미지의 각도가 잘 맞지 않음. 마스크, 얼굴이미지, 정장이미지의 가로세로 비율이 중요하다. test7

### 피드백1

- 얼굴마스크는 원본의 얼굴을 크롭하는 용으로 사용. 원본의 배경이 흰색이 아닐경우 증명사진을 만들면서 원본의 배경이 사용이 되는건 문제가 된다. 원본의 얼굴을 크롭한 후 배경을 투명하게 만들 예정.
- 얼굴이 사진의 중앙에 올 수 있도록 설정해야 함.
- 모델마스크는 배경을 얼굴과 함께 포함해서 목 부위까지 가린 마스크 기법을 이용하기로 함. 어쩌면 턱의 끝부분을 추적해서 그 위치까지 마스크로 감싸는 로직을 만들어야 할 수도 있다.
- 아직은 512x512 정사각형 사진으로 작업하기로 함. 새로운 사이즈의 이미지로 학습하는 건 나중에 할 예정.

### 피드백 수행

- 이유는 잘 모르겠지만 원본의 배경을 투명하게 하면 안된다. 배경을 검은색으로 칠하니까 원본의 얼굴이 잘 보존이 됐다.
- 중앙 보다는 모델마스크의 선에 맞도록 얼굴을 위치시켜야 한다. 얼굴이 중앙에 있을 경우 목이 없는 채로 정장이미지와 합성이 된다.
- 턱 끝부분의 픽셀을 알아 낼수가 없어서 일단은 입술의 최하단 픽셀을 모델마스크의 선까지 맞추었다. 결과적으로 목은 잘 생성됐으나, 얼굴 하관이 재생성이 됐다. test10

### 피드백2

- 턱을 인식하는 방법을 알아냈다. 얼굴 마스크의 픽셀과 모델마스크 선과의 거리가 최하단인 픽셀이 턱이라고 인식시켜보자.

---
